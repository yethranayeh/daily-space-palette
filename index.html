<!-- @format -->

<!DOCTYPE html>
<html lang="en">
	<head>
		<!-- Required meta tags -->
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<!-- Bootstrap CSS -->
		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
			crossorigin="anonymous"
		/>

		<!-- Bootstrap Icons -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.0/font/bootstrap-icons.css" />

		<style>
			.bi-chevron-down {
				-webkit-transition: -webkit-transform 0.4s ease-in-out;
				-ms-transition: -ms-transform 0.4s ease-in-out;
				transition: transform 0.4s ease-in-out;
			}
			.rotate-180 {
				/* display: inline-block; */
				transform: rotate(180deg);
				/* background-color: aqua; */
			}
		</style>

		<!-- Alpine Collapse Plugin -->
		<script defer src="https://unpkg.com/@alpinejs/collapse@3.x.x/dist/cdn.min.js"></script>

		<!-- Alpine JS Core -->
		<script defer src="https://unpkg.com/alpinejs@3.4.2/dist/cdn.min.js"></script>

		<title>Daily Space Palette</title>
	</head>
	<body class="bg-dark text-light">
		<div class="container">
			<!-- Start: Page title -->
			<div class="text-center my-5 py-5">
				<h1 class="mb-4">Daily Space Palette</h1>
				<span class="lead mx-2"
					>Your daily dose of color palettes generated from the colors of NASA's current
					<a href="https://apod.nasa.gov/apod/astropix.html" target="_blank">Astronomy Picture of the Day</a>
				</span>
			</div>
			<!-- End: Page title -->
			<!-- Start: Image section -->
			<section class="row">
				<!-- Title, Author, Date -->
				<div class="col-md-12 text-center mt-5">
					<h2 id="title">Image Title</h2>
				</div>
				<hr class="mx-auto border border-1 border-white rounded w-25 my-2" />
				<div class="col-md-12 text-center mb-4">
					<h4 id="author">Author</h4>
					<span id="date" class="text-muted fs-6">2021-11-06</span>
				</div>

				<!-- Image -->
				<div class="col-md-12" style="max-height: 450px">
					<img
						id="picture"
						class="mx-auto img-thumbnail d-block h-100 w-100"
						src="62-600x100.jpg"
						alt="Astronomy Picture of the Day"
					/>
				</div>

				<!-- Description -->
				<div class="col-md-12 mt-4" x-data="{ expanded: true }">
					<div class="row">
						<div class="col-3" @click="expanded = ! expanded">
							<span class="h2 text-truncate mb-0"
								>Description
								<!-- Chevron Icon -->
								<i
									x-bind:class="expanded ? '' : ' rotate-180'"
									class="bi bi-chevron-down text-light d-inline-block"
								></i>
							</span>
						</div>
					</div>

					<p id="description" class="lead" x-show="expanded" x-collapse>
						Lorem, ipsum dolor sit amet consectetur adipisicing elit. Porro optio officiis iusto deserunt explicabo
						animi, recusandae magni id voluptas illo quasi minima ducimus dolore, eaque quod expedita, quam fugiat
						accusamus.
					</p>
				</div>
			</section>
			<!-- End: Image section -->
			<!-- Start: Palette section -->
			<section class="col-12 mt-5 text-center py-5">
				<h2>Palettes</h2>
				<div id="palettes" class="row">
					<div id="palette_1" class="col-12 col-sm-6 mt-4 mx-auto py-3">
						<h4>Palette #1</h4>
					</div>
				</div>
			</section>
			<!-- End: Palette section -->
		</div>

		<!-- Bootstrap Bundle with Popper -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
			crossorigin="anonymous"
		></script>

		<!-- <script src="js/astro.js"></script> -->
		<script src="js/vibrant.js"></script>
		<script>
			// Vibrant.from("https://picsum.photos/id/62/600/100")
			Vibrant.from("sur.jpg").getPalette(function (err, palette) {
				let { DarkMuted, DarkVibrant, LightMuted, LightVibrant, Muted, Vibrant } = palette;
				let values = Object.values(palette);
				let keys = Object.keys(palette);
				console.log(keys);
				// console.log(Object.values(values[0]));
				counter = 1;
				// For each key (a shade of color)
				for (const key of keys) {
					// If the key is not null
					if (palette[key]) {
						// RGB Array with values of the color
						rgb_array = Object.values(palette[key]);

						// Convert RGB to HEX
						// Code borrowed from Michal Perlakowski on Stack Overflow
						const rgbToHex = (r, g, b) => "#" + [r, g, b].map((x) => x.toString(16).padStart(2, "0")).join("");

						hex = rgbToHex(rgb_array[0][0], rgb_array[0][1], rgb_array[0][2]);

						// Get palette container
						const paletteDOM = document.getElementById(`palette_${counter}`);

						// Insert color to DOM
						paletteDOM.innerHTML =
							paletteDOM.innerHTML +
							`<div
								class="mx-auto border-top border-bottom border-white fw-light" 
								style="background-color: ${hex};height: 80px; width: 80px; display: inline-block;" 
								title="${key}"
							>
								<div class="row my-1 px-2">
									<div class="col">
										<div class="form-check form-switch">
											<input 
												class="form-check-input" 
												type="checkbox" 
												id="HEXorRGB"
											>

											<label 
											class="form-check-label" 
											for="HEXorRGB"
											>
												HEX
											</label>
										</div>
									</div>
								</div>
								<div class="row">
									<div class="col">
										<p>${hex}</p>
									</div>
								</div>						
							</div>`;
					}
				}
			});
			// Rest
		</script>
	</body>
</html>
